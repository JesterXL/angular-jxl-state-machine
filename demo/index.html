<html>
<head><title>Demo</title></head>
<body ng-app="app">

<script src="angular.js"></script>
<script src="lodash.js"></script>
<script src="jxlStateMachine.js"></script>
<script>

	angular.module("app", ['com.jessewarden.statemachine'])
	.run(function($rootScope, 
					jxlStateMachine, 
					$timeout)
	{

		console.log("run.");
		var fsm = jxlStateMachine;
		fsm.addState("fire1");
		fsm.addState("fire2");
		fsm.addState("fire3");
		$rootScope.$on("jxlStateMachine:change", function(event)
		{
			console.log("event:", event);
		});
		fsm.initialState = "fire1";
		
		$timeout(function()
		{
			fsm.changeState("fire2");
		}, 1000);

		$timeout(function()
		{
			fsm.changeState("fire3");
		}, 2000);

		$timeout(function()
		{
			fsm.changeState("fire1");
		}, 3000);
	});
	
</script>
</body>